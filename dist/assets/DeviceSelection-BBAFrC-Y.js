import{h as U,m as L,K as H,l as X,C as K,r as u,o as M,p as F,q as Y,t as q,N as Q,R as J,x as Z,y as ee,O as te,v as S,z as ne,A as oe,D,E as re,F as se,P as ae,j as a,G as j,T as E,I as ie,H as le,Q as ce,S as ue,U as de,V as pe,W as me,X as fe}from"./index-DY3ttFyu.js";import{N as ge,R as xe,a as ye,u as ve,b as he,A as be}from"./context-BTBnpWSX.js";import{u as _}from"./KeyCode-DPqf1Y-U.js";import{O as Ce}from"./OutlinedInput-Cv-cWd7b.js";import{B as je}from"./Button-C6FJzEoW.js";import"./pickAttrs-BiRfG8qw.js";import"./useForkRef-kdbJMlYF.js";const Se=e=>{const{componentCls:t,iconCls:o,boxShadow:n,colorText:r,colorSuccess:s,colorError:p,colorWarning:d,colorInfo:i,fontSizeLG:l,motionEaseInOutCirc:m,motionDurationSlow:f,marginXS:y,paddingXS:g,borderRadiusLG:x,zIndexPopup:c,contentPadding:h,contentBg:b}=e,N=`${t}-notice`,O=new H("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:g,transform:"translateY(0)",opacity:1}}),$=new H("MessageMoveOut",{"0%":{maxHeight:e.height,padding:g,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),C={padding:g,textAlign:"center",[`${t}-custom-content > ${o}`]:{verticalAlign:"text-bottom",marginInlineEnd:y,fontSize:l},[`${N}-content`]:{display:"inline-block",padding:h,background:b,borderRadius:x,boxShadow:n,pointerEvents:"all"},[`${t}-success > ${o}`]:{color:s},[`${t}-error > ${o}`]:{color:p},[`${t}-warning > ${o}`]:{color:d},[`${t}-info > ${o},
      ${t}-loading > ${o}`]:{color:i}};return[{[t]:Object.assign(Object.assign({},X(e)),{color:r,position:"fixed",top:y,width:"100%",pointerEvents:"none",zIndex:c,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:O,animationDuration:f,animationPlayState:"paused",animationTimingFunction:m},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:$,animationDuration:f,animationPlayState:"paused",animationTimingFunction:m},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${N}-wrapper`]:Object.assign({},C)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},C),{padding:0,textAlign:"start"})}]},Oe=e=>({zIndexPopup:e.zIndexPopupBase+K+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}),W=U("Message",e=>{const t=L(e,{height:150});return[Se(t)]},Oe);var Ie=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]]);return o};const Ne={info:u.createElement(xe,null),success:u.createElement(Y,null),error:u.createElement(q,null),warning:u.createElement(ye,null),loading:u.createElement(Q,null)},G=e=>{let{prefixCls:t,type:o,icon:n,children:r}=e;return u.createElement("div",{className:F(`${t}-custom-content`,`${t}-${o}`)},n||Ne[o],u.createElement("span",null,r))},Ee=e=>{const{prefixCls:t,className:o,type:n,icon:r,content:s}=e,p=Ie(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:d}=u.useContext(M),i=t||d("message"),l=_(i),[m,f,y]=W(i,l);return m(u.createElement(ge,Object.assign({},p,{prefixCls:i,className:F(o,f,`${i}-notice-pure-panel`,y,l),eventKey:"pure",duration:null,content:u.createElement(G,{prefixCls:i,type:n,icon:r},s)})))};function $e(e,t){return{motionName:t??`${e}-move-up`}}function T(e){let t;const o=new Promise(r=>{t=e(()=>{r(!0)})}),n=()=>{t==null||t()};return n.then=(r,s)=>o.then(r,s),n.promise=o,n}var Pe=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]]);return o};const we=8,Fe=3,Ae=e=>{let{children:t,prefixCls:o}=e;const n=_(o),[r,s,p]=W(o,n);return r(u.createElement(he,{classNames:{list:F(s,p,n)}},t))},Re=(e,t)=>{let{prefixCls:o,key:n}=t;return u.createElement(Ae,{prefixCls:o,key:n},e)},De=u.forwardRef((e,t)=>{const{top:o,prefixCls:n,getContainer:r,maxCount:s,duration:p=Fe,rtl:d,transitionName:i,onAllRemoved:l}=e,{getPrefixCls:m,getPopupContainer:f,message:y,direction:g}=u.useContext(M),x=n||m("message"),c=()=>({left:"50%",transform:"translateX(-50%)",top:o??we}),h=()=>F({[`${x}-rtl`]:d??g==="rtl"}),b=()=>$e(x,i),N=u.createElement("span",{className:`${x}-close-x`},u.createElement(J,{className:`${x}-close-icon`})),[O,$]=ve({prefixCls:x,style:c,className:h,motion:b,closable:!1,closeIcon:N,duration:p,getContainer:()=>(r==null?void 0:r())||(f==null?void 0:f())||document.body,maxCount:s,onAllRemoved:l,renderNotifications:Re});return u.useImperativeHandle(t,()=>Object.assign(Object.assign({},O),{prefixCls:x,message:y})),$});let k=0;function V(e){const t=u.useRef(null);return Z(),[u.useMemo(()=>{const n=i=>{var l;(l=t.current)===null||l===void 0||l.close(i)},r=i=>{if(!t.current){const A=()=>{};return A.then=()=>{},A}const{open:l,prefixCls:m,message:f}=t.current,y=`${m}-notice`,{content:g,icon:x,type:c,key:h,className:b,style:N,onClose:O}=i,$=Pe(i,["content","icon","type","key","className","style","onClose"]);let C=h;return C==null&&(k+=1,C=`antd-message-${k}`),T(A=>(l(Object.assign(Object.assign({},$),{key:C,content:u.createElement(G,{prefixCls:m,type:c,icon:x},g),placement:"top",className:F(c&&`${y}-${c}`,b,f==null?void 0:f.className),style:Object.assign(Object.assign({},f==null?void 0:f.style),N),onClose:()=>{O==null||O(),A()}})),()=>{n(C)}))},p={open:r,destroy:i=>{var l;i!==void 0?n(i):(l=t.current)===null||l===void 0||l.destroy()}};return["info","success","warning","error","loading"].forEach(i=>{const l=(m,f,y)=>{let g;m&&typeof m=="object"&&"content"in m?g=m:g={content:m};let x,c;typeof f=="function"?c=f:(x=f,c=y);const h=Object.assign(Object.assign({onClose:c,duration:x},g),{type:i});return r(h)};p[i]=l}),p},[]),u.createElement(De,Object.assign({key:"message-holder"},e,{ref:t}))]}function Me(e){return V(e)}let v=null,I=e=>e(),P=[],w={};function z(){const{getContainer:e,duration:t,rtl:o,maxCount:n,top:r}=w,s=(e==null?void 0:e())||document.body;return{getContainer:()=>s,duration:t,rtl:o,maxCount:n,top:r}}const Te=S.forwardRef((e,t)=>{const{messageConfig:o,sync:n}=e,{getPrefixCls:r}=u.useContext(M),s=w.prefixCls||r("message"),p=u.useContext(be),[d,i]=V(Object.assign(Object.assign(Object.assign({},o),{prefixCls:s}),p.message));return S.useImperativeHandle(t,()=>{const l=Object.assign({},d);return Object.keys(l).forEach(m=>{l[m]=function(){return n(),d[m].apply(d,arguments)}}),{instance:l,sync:n}}),i}),He=S.forwardRef((e,t)=>{const[o,n]=S.useState(z),r=()=>{n(z)};S.useEffect(r,[]);const s=oe(),p=s.getRootPrefixCls(),d=s.getIconPrefixCls(),i=s.getTheme(),l=S.createElement(Te,{ref:t,sync:r,messageConfig:o});return S.createElement(ne,{prefixCls:p,iconPrefixCls:d,theme:i},s.holderRender?s.holderRender(l):l)});function R(){if(!v){const e=document.createDocumentFragment(),t={fragment:e};v=t,I(()=>{ee(S.createElement(He,{ref:o=>{const{instance:n,sync:r}=o||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=r,R())})}}),e)});return}v.instance&&(P.forEach(e=>{const{type:t,skipped:o}=e;if(!o)switch(t){case"open":{I(()=>{const n=v.instance.open(Object.assign(Object.assign({},w),e.config));n==null||n.then(e.resolve),e.setCloseFn(n)});break}case"destroy":I(()=>{v==null||v.instance.destroy(e.key)});break;default:I(()=>{var n;const r=(n=v.instance)[t].apply(n,te(e.args));r==null||r.then(e.resolve),e.setCloseFn(r)})}}),P=[])}function ke(e){w=Object.assign(Object.assign({},w),e),I(()=>{var t;(t=v==null?void 0:v.sync)===null||t===void 0||t.call(v)})}function ze(e){const t=T(o=>{let n;const r={type:"open",config:e,resolve:o,setCloseFn:s=>{n=s}};return P.push(r),()=>{n?I(()=>{n()}):r.skipped=!0}});return R(),t}function _e(e,t){const o=T(n=>{let r;const s={type:e,args:t,resolve:n,setCloseFn:p=>{r=p}};return P.push(s),()=>{r?I(()=>{r()}):s.skipped=!0}});return R(),o}const We=e=>{P.push({type:"destroy",key:e}),R()},Ge=["success","info","warning","error","loading"],Ve={open:ze,destroy:We,config:ke,useMessage:Me,_InternalPanelDoNotUseOrYouWillBeFired:Ee},B=Ve;Ge.forEach(e=>{B[e]=function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return _e(e,o)}});const Be=()=>{const[e,t]=B.useMessage(),{consumer:o}=D(c=>c.consumer),{deviceSetup:n,eventInfoDetail:r}=D(c=>c.event);D(c=>c.stripe);const[s,p]=u.useState(0),d=re(),i=se(),l=()=>s<1?p(0):p(parseInt(s)-1),m=()=>p(Number(s)+1);u.useCallback(()=>d(ae(s)),[s,d])();const y=()=>{e.open({type:"warning",content:a.jsxs(E,{textTransform:"none",color:"var(--blue-dark-600, #155EEF)",textAlign:"left",fontFamily:"Inter",fontSize:"14px",fontStyle:"normal",fontWeight:400,lineHeight:"22px",children:["Hi,"," ",a.jsx("span",{style:{textTransform:"capitalize"},children:o==null?void 0:o.name}),"!",a.jsx("br",{}),"Device selection must be bigger than 0!"]})})},g=()=>{const c=new Set;for(let b of n)b.consumerUses!=="Sale"&&c.add(Number(b.value));const h=Array.from(c);return Math.max(...h)},x=async c=>{if(c==null||c.preventDefault(),Number(s)===0)return y();const h={customerEmail:o.email,device:g()?Number(s)*g():0};if(Number(s)>0&&o){const b=await le.post("/stripe/create-payment-intent",h);if(b)return d(ce({deviceNeeded:Number(s),deviceValue:g()})),d(ue({deviceNeeded:Number(s),deviceValue:g()})),d(de({deviceNeeded:Number(s),deviceValue:g()})),d(pe(b.data)),d(me(Number(s))),r.merchant?i("/payment"):i("/qr-code-generation")}};return a.jsxs(a.Fragment,{children:[t,a.jsx(j,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,container:!0,children:a.jsxs(j,{display:"flex",justifyContent:"center",alignSelf:"stretch",height:"50svh",margin:"0 auto 8svh",gap:2,container:!0,children:[a.jsx(j,{display:"flex",justifyContent:"center",item:!0,xs:10,children:a.jsxs("div",{style:{width:"100%",justifyContent:"center",alignItems:"center"},className:"form",id:"3",children:[a.jsx(j,{display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"stretch",justifyContent:"center",item:!0,xs:12,margin:"1rem 0",children:a.jsxs(E,{textTransform:"none",color:"var(--gray-900, #101828)",textAlign:"left",fontFamily:"Inter",fontSize:"24px",fontStyle:"normal",fontWeight:600,lineHeight:"32px",children:["Hi,"," ",a.jsx("span",{style:{textTransform:"capitalize"},children:o==null?void 0:o.name})]})}),a.jsx(j,{display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"stretch",justifyContent:"center",item:!0,xs:12,margin:"1rem 0",children:a.jsx(E,{color:"var(--gray-600, #475467",textAlign:"center",fontFamily:"Inter",fontSize:"16px",fontStyle:"normal",fontWeight:500,lineHeight:"24px",children:"Select how many devices you need."})}),a.jsx(j,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",item:!0,xs:12,margin:"1rem 0",children:a.jsx(Ce,{value:s,name:"numberNeeded",type:"number",id:"input-single-selection",onChange:c=>p(c.target.value),style:{borderRadius:"12px",margin:"0.1rem auto 1rem",textAlign:"center"},startAdornment:a.jsx("button",{style:{backgroundColor:"transparent",border:"transparent",outline:"none",margin:0,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px 10px 10px",width:"100%"},onClick:()=>l(),children:a.jsx(E,{fontSize:"24px",style:{display:"flex",justifyContent:"center",alignItems:"center",margin:"auto"},children:"-"})}),endAdornment:a.jsx("button",{style:{backgroundColor:"transparent",border:"transparent",outline:"none",margin:0,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 10px 10px 20px",width:"100%"},onClick:()=>m(),children:a.jsx(E,{fontSize:"24px",style:{display:"flex",justifyContent:"center",alignItems:"center",margin:"auto"},children:"+"})}),fullWidth:!0})}),a.jsx(j,{item:!0,xs:12,margin:"1rem 0",children:a.jsx(je,{onClick:x,style:{display:"flex",padding:"12px 20px",justifyContent:"center",alignItems:"center",gap:"8px",alignSelf:"stretch",borderRadius:"8px",border:"1px solid var(--blue-dark-600, #155EEF)",background:"var(--blue-dark-600, #155EEF)",boxShadow:"0px 1px 2px 0px rgba(16, 24, 40, 0.05)",width:"100%"},children:a.jsxs(E,{textTransform:"none",fontFamily:"Inter",fontSize:"16px",fontStyle:"normal",fontWeight:600,lineHeight:"24px",color:"var(--base-white, #FFF)",children:["Continue"," "]})})})]})})," "]})}),a.jsx(j,{display:"flex",alignItems:"center",justifyContent:"center",item:!0,xs:12,children:a.jsx(ie,{steps:r.merchant?3:2,current:r.merchant?75:100})})," "]})},Je=()=>a.jsx(u.Suspense,{fallback:a.jsx(fe,{}),children:a.jsx(Be,{})});export{Je as default};
