import{h as L,m as X,K as H,l as K,C as Y,r as u,o as M,p as A,q,t as Q,N as J,R as Z,x as ee,y as te,O as ne,v as O,z as oe,A as se,D,E as re,F as ie,P as ae,j as c,G as S,T as $,H as ce,J as le,Q as ue,S as de,U as me,V as pe,W as fe,X as ge}from"./index-CfIzPxVU.js";import{N as xe,R as ye,a as ve,u as he,b as Ce,A as be}from"./context-BvTgLAXx.js";import{u as W}from"./KeyCode-CDH7NaE-.js";import{O as je,I as k}from"./OutlinedInput-BgaEkUeF.js";import{B as Se}from"./Button-ZKTpBfP7.js";import"./pickAttrs-CNHWqOR7.js";import"./useForkRef-D4L1EbnA.js";const Oe=e=>{const{componentCls:t,iconCls:o,boxShadow:n,colorText:s,colorSuccess:l,colorError:i,colorWarning:f,colorInfo:r,fontSizeLG:a,motionEaseInOutCirc:p,motionDurationSlow:m,marginXS:C,paddingXS:x,borderRadiusLG:g,zIndexPopup:y,contentPadding:d,contentBg:b}=e,v=`${t}-notice`,I=new H("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:x,transform:"translateY(0)",opacity:1}}),N=new H("MessageMoveOut",{"0%":{maxHeight:e.height,padding:x,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),j={padding:x,textAlign:"center",[`${t}-custom-content > ${o}`]:{verticalAlign:"text-bottom",marginInlineEnd:C,fontSize:a},[`${v}-content`]:{display:"inline-block",padding:d,background:b,borderRadius:g,boxShadow:n,pointerEvents:"all"},[`${t}-success > ${o}`]:{color:l},[`${t}-error > ${o}`]:{color:i},[`${t}-warning > ${o}`]:{color:f},[`${t}-info > ${o},
      ${t}-loading > ${o}`]:{color:r}};return[{[t]:Object.assign(Object.assign({},K(e)),{color:s,position:"fixed",top:C,width:"100%",pointerEvents:"none",zIndex:y,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:I,animationDuration:m,animationPlayState:"paused",animationTimingFunction:p},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:N,animationDuration:m,animationPlayState:"paused",animationTimingFunction:p},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${v}-wrapper`]:Object.assign({},j)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},j),{padding:0,textAlign:"start"})}]},Ie=e=>({zIndexPopup:e.zIndexPopupBase+Y+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}),G=L("Message",e=>{const t=X(e,{height:150});return[Oe(t)]},Ie);var Ee=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]]);return o};const $e={info:u.createElement(ye,null),success:u.createElement(q,null),error:u.createElement(Q,null),warning:u.createElement(ve,null),loading:u.createElement(J,null)},V=e=>{let{prefixCls:t,type:o,icon:n,children:s}=e;return u.createElement("div",{className:A(`${t}-custom-content`,`${t}-${o}`)},n||$e[o],u.createElement("span",null,s))},Ne=e=>{const{prefixCls:t,className:o,type:n,icon:s,content:l}=e,i=Ee(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:f}=u.useContext(M),r=t||f("message"),a=W(r),[p,m,C]=G(r,a);return p(u.createElement(xe,Object.assign({},i,{prefixCls:r,className:A(o,m,`${r}-notice-pure-panel`,C,a),eventKey:"pure",duration:null,content:u.createElement(V,{prefixCls:r,type:n,icon:s},l)})))};function Pe(e,t){return{motionName:t??`${e}-move-up`}}function T(e){let t;const o=new Promise(s=>{t=e(()=>{s(!0)})}),n=()=>{t==null||t()};return n.then=(s,l)=>o.then(s,l),n.promise=o,n}var we=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]]);return o};const Ae=8,Fe=3,Re=e=>{let{children:t,prefixCls:o}=e;const n=W(o),[s,l,i]=G(o,n);return s(u.createElement(Ce,{classNames:{list:A(l,i,n)}},t))},De=(e,t)=>{let{prefixCls:o,key:n}=t;return u.createElement(Re,{prefixCls:o,key:n},e)},Me=u.forwardRef((e,t)=>{const{top:o,prefixCls:n,getContainer:s,maxCount:l,duration:i=Fe,rtl:f,transitionName:r,onAllRemoved:a}=e,{getPrefixCls:p,getPopupContainer:m,message:C,direction:x}=u.useContext(M),g=n||p("message"),y=()=>({left:"50%",transform:"translateX(-50%)",top:o??Ae}),d=()=>A({[`${g}-rtl`]:f??x==="rtl"}),b=()=>Pe(g,r),v=u.createElement("span",{className:`${g}-close-x`},u.createElement(Z,{className:`${g}-close-icon`})),[I,N]=he({prefixCls:g,style:y,className:d,motion:b,closable:!1,closeIcon:v,duration:i,getContainer:()=>(s==null?void 0:s())||(m==null?void 0:m())||document.body,maxCount:l,onAllRemoved:a,renderNotifications:De});return u.useImperativeHandle(t,()=>Object.assign(Object.assign({},I),{prefixCls:g,message:C})),N});let z=0;function B(e){const t=u.useRef(null);return ee(),[u.useMemo(()=>{const n=r=>{var a;(a=t.current)===null||a===void 0||a.close(r)},s=r=>{if(!t.current){const F=()=>{};return F.then=()=>{},F}const{open:a,prefixCls:p,message:m}=t.current,C=`${p}-notice`,{content:x,icon:g,type:y,key:d,className:b,style:v,onClose:I}=r,N=we(r,["content","icon","type","key","className","style","onClose"]);let j=d;return j==null&&(z+=1,j=`antd-message-${z}`),T(F=>(a(Object.assign(Object.assign({},N),{key:j,content:u.createElement(V,{prefixCls:p,type:y,icon:g},x),placement:"top",className:A(y&&`${C}-${y}`,b,m==null?void 0:m.className),style:Object.assign(Object.assign({},m==null?void 0:m.style),v),onClose:()=>{I==null||I(),F()}})),()=>{n(j)}))},i={open:s,destroy:r=>{var a;r!==void 0?n(r):(a=t.current)===null||a===void 0||a.destroy()}};return["info","success","warning","error","loading"].forEach(r=>{const a=(p,m,C)=>{let x;p&&typeof p=="object"&&"content"in p?x=p:x={content:p};let g,y;typeof m=="function"?y=m:(g=m,y=C);const d=Object.assign(Object.assign({onClose:y,duration:g},x),{type:r});return s(d)};i[r]=a}),i},[]),u.createElement(Me,Object.assign({key:"message-holder"},e,{ref:t}))]}function Te(e){return B(e)}let h=null,E=e=>e(),P=[],w={};function _(){const{getContainer:e,duration:t,rtl:o,maxCount:n,top:s}=w,l=(e==null?void 0:e())||document.body;return{getContainer:()=>l,duration:t,rtl:o,maxCount:n,top:s}}const He=O.forwardRef((e,t)=>{const{messageConfig:o,sync:n}=e,{getPrefixCls:s}=u.useContext(M),l=w.prefixCls||s("message"),i=u.useContext(be),[f,r]=B(Object.assign(Object.assign(Object.assign({},o),{prefixCls:l}),i.message));return O.useImperativeHandle(t,()=>{const a=Object.assign({},f);return Object.keys(a).forEach(p=>{a[p]=function(){return n(),f[p].apply(f,arguments)}}),{instance:a,sync:n}}),r}),ke=O.forwardRef((e,t)=>{const[o,n]=O.useState(_),s=()=>{n(_)};O.useEffect(s,[]);const l=se(),i=l.getRootPrefixCls(),f=l.getIconPrefixCls(),r=l.getTheme(),a=O.createElement(He,{ref:t,sync:s,messageConfig:o});return O.createElement(oe,{prefixCls:i,iconPrefixCls:f,theme:r},l.holderRender?l.holderRender(a):a)});function R(){if(!h){const e=document.createDocumentFragment(),t={fragment:e};h=t,E(()=>{te(O.createElement(ke,{ref:o=>{const{instance:n,sync:s}=o||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=s,R())})}}),e)});return}h.instance&&(P.forEach(e=>{const{type:t,skipped:o}=e;if(!o)switch(t){case"open":{E(()=>{const n=h.instance.open(Object.assign(Object.assign({},w),e.config));n==null||n.then(e.resolve),e.setCloseFn(n)});break}case"destroy":E(()=>{h==null||h.instance.destroy(e.key)});break;default:E(()=>{var n;const s=(n=h.instance)[t].apply(n,ne(e.args));s==null||s.then(e.resolve),e.setCloseFn(s)})}}),P=[])}function ze(e){w=Object.assign(Object.assign({},w),e),E(()=>{var t;(t=h==null?void 0:h.sync)===null||t===void 0||t.call(h)})}function _e(e){const t=T(o=>{let n;const s={type:"open",config:e,resolve:o,setCloseFn:l=>{n=l}};return P.push(s),()=>{n?E(()=>{n()}):s.skipped=!0}});return R(),t}function We(e,t){const o=T(n=>{let s;const l={type:e,args:t,resolve:n,setCloseFn:i=>{s=i}};return P.push(l),()=>{s?E(()=>{s()}):l.skipped=!0}});return R(),o}const Ge=e=>{P.push({type:"destroy",key:e}),R()},Ve=["success","info","warning","error","loading"],Be={open:_e,destroy:Ge,config:ze,useMessage:Te,_InternalPanelDoNotUseOrYouWillBeFired:Ne},U=Be;Ve.forEach(e=>{U[e]=function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return We(e,o)}});const Ue=()=>{const[e,t]=U.useMessage(),{consumer:o}=D(d=>d.consumer),{deviceSetup:n,eventInfoDetail:s}=D(d=>d.event),{customerStripe:l}=D(d=>d.stripe),[i,f]=u.useState(0),r=re(),a=ie(),p=()=>i<1?f(0):f(parseInt(i)-1),m=()=>f(Number(i)+1);u.useCallback(()=>r(ae(i)),[i,r])();const x=()=>{e.open({type:"warning",content:c.jsxs($,{textTransform:"none",color:"var(--blue-dark-600, #155EEF)",textAlign:"left",fontFamily:"Inter",fontSize:"14px",fontStyle:"normal",fontWeight:400,lineHeight:"22px",children:["Hi,"," ",c.jsx("span",{style:{textTransform:"capitalize"},children:o==null?void 0:o.name}),"!",c.jsx("br",{}),"Device selection must be bigger than 0!"]})})},g=()=>{const d=new Set;for(let v of n)v.consumerUses!=="Sale"&&d.add(Number(v.value));const b=Array.from(d);return Math.max(...b)},y=async d=>{if(d==null||d.preventDefault(),i===0)return x();const b={customerEmail:o.email,customerId:l.stripeid,device:g()?i*g():0};if(i>0&&o){const v=await le.post("/stripe/create-payment-intent",b);if(v)return r(ue({deviceNeeded:i,deviceValue:g()})),r(de({deviceNeeded:i,deviceValue:g()})),r(me({deviceNeeded:i,deviceValue:g()})),r(pe(v.data)),r(fe(Number(i))),s.merchant?a("/payment"):a("/qr-code-generation")}};return c.jsxs(c.Fragment,{children:[t,c.jsx(S,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,container:!0,children:c.jsxs(S,{display:"flex",justifyContent:"center",alignSelf:"stretch",height:"50svh",margin:"0 auto 8svh",gap:2,container:!0,children:[c.jsx(S,{display:"flex",justifyContent:"center",item:!0,xs:10,children:c.jsxs("form",{style:{width:"100%",justifyContent:"center",alignItems:"center"},className:"form",id:"3",children:[c.jsx(S,{display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"stretch",justifyContent:"center",item:!0,xs:12,margin:"1rem 0",children:c.jsxs($,{textTransform:"none",color:"var(--gray-900, #101828)",textAlign:"left",fontFamily:"Inter",fontSize:"24px",fontStyle:"normal",fontWeight:600,lineHeight:"32px",children:["Hi,"," ",c.jsx("span",{style:{textTransform:"capitalize"},children:o==null?void 0:o.name}),"! Select amount"," "]})}),c.jsx(S,{display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"stretch",justifyContent:"center",item:!0,xs:12,margin:"1rem 0",children:c.jsx($,{color:"var(--gray-600, #475467",textAlign:"center",fontFamily:"Inter",fontSize:"16px",fontStyle:"normal",fontWeight:500,lineHeight:"24px",children:"Select the amount of device you need."})}),c.jsx(S,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",item:!0,xs:12,margin:"1rem 0",children:c.jsx(je,{value:i,name:"numberNeeded",type:"number",id:"input-single-selection",onChange:d=>f(d.target.value),style:{borderRadius:"12px",margin:"0.1rem auto 1rem",textAlign:"center"},startAdornment:c.jsx(k,{onClick:()=>p(),position:"start",children:c.jsx($,{fontSize:"24px",children:"-"})}),endAdornment:c.jsx(k,{onClick:()=>m(),position:"end",children:c.jsx($,{fontSize:"24px",children:"+"})}),fullWidth:!0})}),c.jsx(S,{item:!0,xs:12,margin:"1rem 0",children:c.jsx(Se,{onClick:y,style:{display:"flex",padding:"12px 20px",justifyContent:"center",alignItems:"center",gap:"8px",alignSelf:"stretch",borderRadius:"8px",border:"1px solid var(--blue-dark-600, #155EEF)",background:"var(--blue-dark-600, #155EEF)",boxShadow:"0px 1px 2px 0px rgba(16, 24, 40, 0.05)",width:"100%"},children:c.jsxs($,{textTransform:"none",fontFamily:"Inter",fontSize:"16px",fontStyle:"normal",fontWeight:600,lineHeight:"24px",color:"var(--base-white, #FFF)",children:["Continue"," "]})})})]})})," "]})}),c.jsx(S,{display:"flex",alignItems:"center",justifyContent:"center",item:!0,xs:12,children:c.jsx(ce,{steps:s.merchant?3:2,current:s.merchant?75:100})})," "]})},Ze=()=>c.jsx(u.Suspense,{fallback:c.jsx(ge,{}),children:c.jsx(Ue,{})});export{Ze as default};
