import{w as L,x as U,K as k,y as X,C as K,r as u,z as D,A as _,N as Y,B as F,R as Q,D as q,E as J,F as Z,H as ee,J as te,L as ne,M as oe,O as se,P as re,Q as ae,S,U as ie,V as le,W as ce,i as R,k as ue,l as de,X as pe,j as a,G as j,T as $,I as me,o as fe,Y as ge,Z as xe,$ as ye,a0 as ve,a1 as he,a2 as Ce}from"./index-DcevCD6o.js";import{O as be}from"./OutlinedInput-DLEZYmIZ.js";import{B as je}from"./Button-C-M37cBg.js";import"./useForkRef-x2dx1W7p.js";const Se=e=>{const{componentCls:t,iconCls:o,boxShadow:n,colorText:s,colorSuccess:r,colorError:p,colorWarning:d,colorInfo:i,fontSizeLG:l,motionEaseInOutCirc:m,motionDurationSlow:f,marginXS:y,paddingXS:g,borderRadiusLG:x,zIndexPopup:c,contentPadding:h,contentBg:C}=e,N=`${t}-notice`,O=new k("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:g,transform:"translateY(0)",opacity:1}}),E=new k("MessageMoveOut",{"0%":{maxHeight:e.height,padding:g,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),b={padding:g,textAlign:"center",[`${t}-custom-content > ${o}`]:{verticalAlign:"text-bottom",marginInlineEnd:y,fontSize:l},[`${N}-content`]:{display:"inline-block",padding:h,background:C,borderRadius:x,boxShadow:n,pointerEvents:"all"},[`${t}-success > ${o}`]:{color:r},[`${t}-error > ${o}`]:{color:p},[`${t}-warning > ${o}`]:{color:d},[`${t}-info > ${o},
      ${t}-loading > ${o}`]:{color:i}};return[{[t]:Object.assign(Object.assign({},X(e)),{color:s,position:"fixed",top:y,width:"100%",pointerEvents:"none",zIndex:c,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:O,animationDuration:f,animationPlayState:"paused",animationTimingFunction:m},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:E,animationDuration:f,animationPlayState:"paused",animationTimingFunction:m},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${N}-wrapper`]:Object.assign({},b)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},b),{padding:0,textAlign:"start"})}]},Oe=e=>({zIndexPopup:e.zIndexPopupBase+K+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}),W=L("Message",e=>{const t=U(e,{height:150});return[Se(t)]},Oe);var Ie=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]]);return o};const Ne={info:u.createElement(Q,null),success:u.createElement(q,null),error:u.createElement(J,null),warning:u.createElement(Z,null),loading:u.createElement(ee,null)},G=e=>{let{prefixCls:t,type:o,icon:n,children:s}=e;return u.createElement("div",{className:F(`${t}-custom-content`,`${t}-${o}`)},n||Ne[o],u.createElement("span",null,s))},$e=e=>{const{prefixCls:t,className:o,type:n,icon:s,content:r}=e,p=Ie(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:d}=u.useContext(D),i=t||d("message"),l=_(i),[m,f,y]=W(i,l);return m(u.createElement(Y,Object.assign({},p,{prefixCls:i,className:F(o,f,`${i}-notice-pure-panel`,y,l),eventKey:"pure",duration:null,content:u.createElement(G,{prefixCls:i,type:n,icon:s},r)})))};function Ee(e,t){return{motionName:t??`${e}-move-up`}}function T(e){let t;const o=new Promise(s=>{t=e(()=>{s(!0)})}),n=()=>{t==null||t()};return n.then=(s,r)=>o.then(s,r),n.promise=o,n}var Pe=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]]);return o};const we=8,Fe=3,Ae=e=>{let{children:t,prefixCls:o}=e;const n=_(o),[s,r,p]=W(o,n);return s(u.createElement(oe,{classNames:{list:F(r,p,n)}},t))},Me=(e,t)=>{let{prefixCls:o,key:n}=t;return u.createElement(Ae,{prefixCls:o,key:n},e)},Re=u.forwardRef((e,t)=>{const{top:o,prefixCls:n,getContainer:s,maxCount:r,duration:p=Fe,rtl:d,transitionName:i,onAllRemoved:l}=e,{getPrefixCls:m,getPopupContainer:f,message:y,direction:g}=u.useContext(D),x=n||m("message"),c=()=>({left:"50%",transform:"translateX(-50%)",top:o??we}),h=()=>F({[`${x}-rtl`]:d??g==="rtl"}),C=()=>Ee(x,i),N=u.createElement("span",{className:`${x}-close-x`},u.createElement(ne,{className:`${x}-close-icon`})),[O,E]=te({prefixCls:x,style:c,className:h,motion:C,closable:!1,closeIcon:N,duration:p,getContainer:()=>(s==null?void 0:s())||(f==null?void 0:f())||document.body,maxCount:r,onAllRemoved:l,renderNotifications:Me});return u.useImperativeHandle(t,()=>Object.assign(Object.assign({},O),{prefixCls:x,message:y})),E});let H=0;function V(e){const t=u.useRef(null);return se(),[u.useMemo(()=>{const n=i=>{var l;(l=t.current)===null||l===void 0||l.close(i)},s=i=>{if(!t.current){const A=()=>{};return A.then=()=>{},A}const{open:l,prefixCls:m,message:f}=t.current,y=`${m}-notice`,{content:g,icon:x,type:c,key:h,className:C,style:N,onClose:O}=i,E=Pe(i,["content","icon","type","key","className","style","onClose"]);let b=h;return b==null&&(H+=1,b=`antd-message-${H}`),T(A=>(l(Object.assign(Object.assign({},E),{key:b,content:u.createElement(G,{prefixCls:m,type:c,icon:x},g),placement:"top",className:F(c&&`${y}-${c}`,C,f==null?void 0:f.className),style:Object.assign(Object.assign({},f==null?void 0:f.style),N),onClose:()=>{O==null||O(),A()}})),()=>{n(b)}))},p={open:s,destroy:i=>{var l;i!==void 0?n(i):(l=t.current)===null||l===void 0||l.destroy()}};return["info","success","warning","error","loading"].forEach(i=>{const l=(m,f,y)=>{let g;m&&typeof m=="object"&&"content"in m?g=m:g={content:m};let x,c;typeof f=="function"?c=f:(x=f,c=y);const h=Object.assign(Object.assign({onClose:c,duration:x},g),{type:i});return s(h)};p[i]=l}),p},[]),u.createElement(Re,Object.assign({key:"message-holder"},e,{ref:t}))]}function De(e){return V(e)}let v=null,I=e=>e(),P=[],w={};function z(){const{getContainer:e,duration:t,rtl:o,maxCount:n,top:s}=w,r=(e==null?void 0:e())||document.body;return{getContainer:()=>r,duration:t,rtl:o,maxCount:n,top:s}}const Te=S.forwardRef((e,t)=>{const{messageConfig:o,sync:n}=e,{getPrefixCls:s}=u.useContext(D),r=w.prefixCls||s("message"),p=u.useContext(ce),[d,i]=V(Object.assign(Object.assign(Object.assign({},o),{prefixCls:r}),p.message));return S.useImperativeHandle(t,()=>{const l=Object.assign({},d);return Object.keys(l).forEach(m=>{l[m]=function(){return n(),d[m].apply(d,arguments)}}),{instance:l,sync:n}}),i}),ke=S.forwardRef((e,t)=>{const[o,n]=S.useState(z),s=()=>{n(z)};S.useEffect(s,[]);const r=le(),p=r.getRootPrefixCls(),d=r.getIconPrefixCls(),i=r.getTheme(),l=S.createElement(Te,{ref:t,sync:s,messageConfig:o});return S.createElement(ie,{prefixCls:p,iconPrefixCls:d,theme:i},r.holderRender?r.holderRender(l):l)});function M(){if(!v){const e=document.createDocumentFragment(),t={fragment:e};v=t,I(()=>{re(S.createElement(ke,{ref:o=>{const{instance:n,sync:s}=o||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=s,M())})}}),e)});return}v.instance&&(P.forEach(e=>{const{type:t,skipped:o}=e;if(!o)switch(t){case"open":{I(()=>{const n=v.instance.open(Object.assign(Object.assign({},w),e.config));n==null||n.then(e.resolve),e.setCloseFn(n)});break}case"destroy":I(()=>{v==null||v.instance.destroy(e.key)});break;default:I(()=>{var n;const s=(n=v.instance)[t].apply(n,ae(e.args));s==null||s.then(e.resolve),e.setCloseFn(s)})}}),P=[])}function He(e){w=Object.assign(Object.assign({},w),e),I(()=>{var t;(t=v==null?void 0:v.sync)===null||t===void 0||t.call(v)})}function ze(e){const t=T(o=>{let n;const s={type:"open",config:e,resolve:o,setCloseFn:r=>{n=r}};return P.push(s),()=>{n?I(()=>{n()}):s.skipped=!0}});return M(),t}function _e(e,t){const o=T(n=>{let s;const r={type:e,args:t,resolve:n,setCloseFn:p=>{s=p}};return P.push(r),()=>{s?I(()=>{s()}):r.skipped=!0}});return M(),o}const We=e=>{P.push({type:"destroy",key:e}),M()},Ge=["success","info","warning","error","loading"],Ve={open:ze,destroy:We,config:He,useMessage:De,_InternalPanelDoNotUseOrYouWillBeFired:$e},B=Ve;Ge.forEach(e=>{B[e]=function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return _e(e,o)}});const Be=()=>{const[e,t]=B.useMessage(),{consumer:o}=R(c=>c.consumer),{deviceSetup:n,eventInfoDetail:s}=R(c=>c.event);R(c=>c.stripe);const[r,p]=u.useState(0),d=ue(),i=de(),l=()=>r<1?p(0):p(parseInt(r)-1),m=()=>p(Number(r)+1);u.useCallback(()=>d(pe(r)),[r,d])();const y=()=>{e.open({type:"warning",content:a.jsxs($,{textTransform:"none",color:"var(--blue-dark-600, #155EEF)",textAlign:"left",fontFamily:"Inter",fontSize:"14px",fontStyle:"normal",fontWeight:400,lineHeight:"22px",children:["Hi,"," ",a.jsx("span",{style:{textTransform:"capitalize"},children:o==null?void 0:o.name}),"!",a.jsx("br",{}),"Device selection must be bigger than 0!"]})})},g=()=>{const c=new Set;for(let C of n)C.consumerUses!=="Sale"&&c.add(Number(C.value));const h=Array.from(c);return Math.max(...h)},x=async c=>{if(c==null||c.preventDefault(),Number(r)===0)return y();const h={customerEmail:o.email,device:g()?Number(r)*g():0};if(Number(r)>0&&o){const C=await fe.post("/stripe/create-payment-intent",h);if(C)return d(ge({deviceNeeded:Number(r),deviceValue:g()})),d(xe({deviceNeeded:Number(r),deviceValue:g()})),d(ye({deviceNeeded:Number(r),deviceValue:g()})),d(ve(C.data)),d(he(Number(r))),s.merchant?i("/payment"):i("/qr-code-generation")}};return a.jsxs(a.Fragment,{children:[t,a.jsx(j,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,container:!0,children:a.jsxs(j,{display:"flex",justifyContent:"center",alignSelf:"stretch",height:"50svh",margin:"0 auto 8svh",gap:2,container:!0,children:[a.jsx(j,{display:"flex",justifyContent:"center",item:!0,xs:10,children:a.jsxs("div",{style:{width:"100%",justifyContent:"center",alignItems:"center"},className:"form",id:"3",children:[a.jsx(j,{display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"stretch",justifyContent:"center",item:!0,xs:12,margin:"1rem 0",children:a.jsxs($,{textTransform:"none",color:"var(--gray-900, #101828)",textAlign:"left",fontFamily:"Inter",fontSize:"24px",fontStyle:"normal",fontWeight:600,lineHeight:"32px",children:["Hi,"," ",a.jsx("span",{style:{textTransform:"capitalize"},children:o==null?void 0:o.name})]})}),a.jsx(j,{display:"flex",flexDirection:"column",alignItems:"center",alignSelf:"stretch",justifyContent:"center",item:!0,xs:12,margin:"1rem 0",children:a.jsx($,{color:"var(--gray-600, #475467",textAlign:"center",fontFamily:"Inter",fontSize:"16px",fontStyle:"normal",fontWeight:500,lineHeight:"24px",children:"Select how many devices you need."})}),a.jsx(j,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",item:!0,xs:12,margin:"1rem 0",children:a.jsx(be,{value:r,name:"numberNeeded",type:"text",id:"input-single-selection",onChange:c=>p(c.target.value),style:{borderRadius:"12px",margin:"0.1rem auto 1rem",textAlign:"center"},startAdornment:a.jsx("button",{style:{backgroundColor:"transparent",border:"transparent",outline:"none",margin:0,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 20px 10px 10px",width:"100%"},onClick:()=>l(),children:a.jsx($,{fontSize:"24px",style:{display:"flex",justifyContent:"center",alignItems:"center",margin:"auto"},children:"-"})}),endAdornment:a.jsx("button",{style:{backgroundColor:"transparent",border:"transparent",outline:"none",margin:0,display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 10px 10px 20px",width:"100%"},onClick:()=>m(),children:a.jsx($,{fontSize:"24px",style:{display:"flex",justifyContent:"center",alignItems:"center",margin:"auto"},children:"+"})}),fullWidth:!0})}),a.jsx(j,{item:!0,xs:12,margin:"1rem 0",children:a.jsx(je,{onClick:x,style:{display:"flex",padding:"12px 20px",justifyContent:"center",alignItems:"center",gap:"8px",alignSelf:"stretch",borderRadius:"8px",border:"1px solid var(--blue-dark-600, #155EEF)",background:"var(--blue-dark-600, #155EEF)",boxShadow:"0px 1px 2px 0px rgba(16, 24, 40, 0.05)",width:"100%"},children:a.jsxs($,{textTransform:"none",fontFamily:"Inter",fontSize:"16px",fontStyle:"normal",fontWeight:600,lineHeight:"24px",color:"var(--base-white, #FFF)",children:["Continue"," "]})})})]})})," "]})}),a.jsx(j,{display:"flex",alignItems:"center",justifyContent:"center",item:!0,xs:12,children:a.jsx(me,{steps:s.merchant?3:2,current:s.merchant?75:100})})," "]})},Ye=()=>a.jsx(u.Suspense,{fallback:a.jsx(Ce,{}),children:a.jsx(Be,{})});export{Ye as default};
