import{r as a,h as re,m as ce,l as he,i as T,aH as Ve,o as K,aL as ze,p as V,aQ as Fe,av as Xe,aB as Ke,bj as qe,aD as Je,aC as Qe,bk as Ue,aE as Ye,ao as Ze,bl as et,an as ve,al as tt,v as D,O as Oe,D as ge,bm as je,F as nt,E as rt,J as Y,j as L,G as te,T as fe,bb as we,V as ot}from"./index-CfIzPxVU.js";import{Q as at}from"./index-CyIM1fkr.js";import{D as it}from"./index-dfU-Mx6i.js";import{l as Ne,r as Z,m as st,k as lt,P as ct,D as dt}from"./Pagination-DTk0pt8z.js";import{S as mt}from"./index-Bm9gYaKe.js";import{u as Re,K as pt}from"./KeyCode-CDH7NaE-.js";import"./index-B0laTGyl.js";import"./pickAttrs-CNHWqOR7.js";import"./Overflow-ugpi8Y_m.js";const ye=a.createContext({}),ut=e=>{const{antCls:t,componentCls:r,iconCls:n,avatarBg:o,avatarColor:i,containerSize:s,containerSizeLG:l,containerSizeSM:c,textFontSize:g,textFontSizeLG:y,textFontSizeSM:v,borderRadius:u,borderRadiusLG:h,borderRadiusSM:p,lineWidth:$,lineType:C}=e,d=(S,b,N)=>({width:S,height:S,borderRadius:"50%",[`&${r}-square`]:{borderRadius:N},[`&${r}-icon`]:{fontSize:b,[`> ${n}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},he(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:o,border:`${T($)} ${C} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),d(s,g,u)),{"&-lg":Object.assign({},d(l,y,h)),"&-sm":Object.assign({},d(c,v,p)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},gt=e=>{const{componentCls:t,groupBorderColor:r,groupOverlapping:n,groupSpace:o}=e;return{[`${t}-group`]:{display:"inline-flex",[`${t}`]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:n}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:o}}}},ft=e=>{const{controlHeight:t,controlHeightLG:r,controlHeightSM:n,fontSize:o,fontSizeLG:i,fontSizeXL:s,fontSizeHeading3:l,marginXS:c,marginXXS:g,colorBorderBg:y}=e;return{containerSize:t,containerSizeLG:r,containerSizeSM:n,textFontSize:Math.round((i+s)/2),textFontSizeLG:l,textFontSizeSM:o,groupSpace:g,groupOverlapping:-c,groupBorderColor:y}},Be=re("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:r}=e,n=ce(e,{avatarBg:r,avatarColor:t});return[ut(n),gt(n)]},ft);var yt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const $t=(e,t)=>{const[r,n]=a.useState(1),[o,i]=a.useState(!1),[s,l]=a.useState(!0),c=a.useRef(null),g=a.useRef(null),y=Ve(t,c),{getPrefixCls:v,avatar:u}=a.useContext(K),h=a.useContext(ye),p=()=>{if(!g.current||!c.current)return;const z=g.current.offsetWidth,B=c.current.offsetWidth;if(z!==0&&B!==0){const{gap:P=4}=e;P*2<B&&n(B-P*2<z?(B-P*2)/z:1)}};a.useEffect(()=>{i(!0)},[]),a.useEffect(()=>{l(!0),n(1)},[e.src]),a.useEffect(p,[e.gap]);const $=()=>{const{onError:z}=e;(z==null?void 0:z())!==!1&&l(!1)},{prefixCls:C,shape:d,size:S,src:b,srcSet:N,icon:E,className:j,rootClassName:M,alt:m,draggable:x,children:f,crossOrigin:A}=e,O=yt(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),w=ze(z=>{var B,P;return(P=(B=S??(h==null?void 0:h.size))!==null&&B!==void 0?B:z)!==null&&P!==void 0?P:"default"}),W=Object.keys(typeof w=="object"?w||{}:{}).some(z=>["xs","sm","md","lg","xl","xxl"].includes(z)),F=Ne(W),_=a.useMemo(()=>{if(typeof w!="object")return{};const z=Z.find(P=>F[P]),B=w[z];return B?{width:B,height:B,fontSize:B&&(E||f)?B/2:18}:{}},[F,w]),G=v("avatar",C),q=Re(G),[H,ee,I]=Be(G,q),U=V({[`${G}-lg`]:w==="large",[`${G}-sm`]:w==="small"}),oe=a.isValidElement(b),de=d||(h==null?void 0:h.shape)||"circle",J=V(G,U,u==null?void 0:u.className,`${G}-${de}`,{[`${G}-image`]:oe||b&&s,[`${G}-icon`]:!!E},I,q,j,M,ee),ne=typeof w=="number"?{width:w,height:w,fontSize:E?w/2:18}:{};let Q;if(typeof b=="string"&&s)Q=a.createElement("img",{src:b,draggable:x,srcSet:N,onError:$,alt:m,crossOrigin:A});else if(oe)Q=b;else if(E)Q=E;else if(o||r!==1){const z=`scale(${r})`,B={msTransform:z,WebkitTransform:z,transform:z};Q=a.createElement(Fe,{onResize:p},a.createElement("span",{className:`${G}-string`,ref:g,style:Object.assign({},B)},f))}else Q=a.createElement("span",{className:`${G}-string`,style:{opacity:0},ref:g},f);return delete O.onError,delete O.gap,H(a.createElement("span",Object.assign({},O,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ne),_),u==null?void 0:u.style),O.style),className:J,ref:y}),Q))},Te=a.forwardRef($t),le=e=>e?typeof e=="function"?e():e:null,ht=e=>{const{componentCls:t,popoverColor:r,titleMinWidth:n,fontWeightStrong:o,innerPadding:i,boxShadowSecondary:s,colorTextHeading:l,borderRadiusLG:c,zIndexPopup:g,titleMarginBottom:y,colorBgElevated:v,popoverBg:u,titleBorderBottom:h,innerContentPadding:p,titlePadding:$}=e;return[{[t]:Object.assign(Object.assign({},he(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:g,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":v,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:u,backgroundClip:"padding-box",borderRadius:c,boxShadow:s,padding:i},[`${t}-title`]:{minWidth:n,marginBottom:y,color:l,fontWeight:o,borderBottom:h,padding:$},[`${t}-inner-content`]:{color:r,padding:p}})},Ke(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},vt=e=>{const{componentCls:t}=e;return{[t]:qe.map(r=>{const n=e[`${r}6`];return{[`&${t}-${r}`]:{"--antd-arrow-background-color":n,[`${t}-inner`]:{backgroundColor:n},[`${t}-arrow`]:{background:"transparent"}}}})}},xt=e=>{const{lineWidth:t,controlHeight:r,fontHeight:n,padding:o,wireframe:i,zIndexPopupBase:s,borderRadiusLG:l,marginXS:c,lineType:g,colorSplit:y,paddingSM:v}=e,u=r-n,h=u/2,p=u/2-t,$=o;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:s+30},Je(e)),Qe({contentRadius:l,limitVerticalRadius:!0})),{innerPadding:i?0:12,titleMarginBottom:i?0:c,titlePadding:i?`${h}px ${$}px ${p}px`:0,titleBorderBottom:i?`${t}px ${g} ${y}`:"none",innerContentPadding:i?`${v}px ${$}px`:0})},Me=re("Popover",e=>{const{colorBgElevated:t,colorText:r}=e,n=ce(e,{popoverBg:t,popoverColor:r});return[ht(n),vt(n),Xe(n,"zoom-big")]},xt,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var St=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const bt=(e,t,r)=>!t&&!r?null:a.createElement(a.Fragment,null,t&&a.createElement("div",{className:`${e}-title`},le(t)),a.createElement("div",{className:`${e}-inner-content`},le(r))),Ct=e=>{const{hashId:t,prefixCls:r,className:n,style:o,placement:i="top",title:s,content:l,children:c}=e;return a.createElement("div",{className:V(t,r,`${r}-pure`,`${r}-placement-${i}`,n),style:o},a.createElement("div",{className:`${r}-arrow`}),a.createElement(Ue,Object.assign({},e,{className:t,prefixCls:r}),c||bt(r,s,l)))},Ot=e=>{const{prefixCls:t,className:r}=e,n=St(e,["prefixCls","className"]),{getPrefixCls:o}=a.useContext(K),i=o("popover",t),[s,l,c]=Me(i);return s(a.createElement(Ct,Object.assign({},n,{prefixCls:i,hashId:l,className:V(r,c)})))};var jt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const wt=e=>{let{title:t,content:r,prefixCls:n}=e;return a.createElement(a.Fragment,null,t&&a.createElement("div",{className:`${n}-title`},le(t)),a.createElement("div",{className:`${n}-inner-content`},le(r)))},Pt=a.forwardRef((e,t)=>{var r,n;const{prefixCls:o,title:i,content:s,overlayClassName:l,placement:c="top",trigger:g="hover",children:y,mouseEnterDelay:v=.1,mouseLeaveDelay:u=.1,onOpenChange:h,overlayStyle:p={}}=e,$=jt(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:C}=a.useContext(K),d=C("popover",o),[S,b,N]=Me(d),E=C(),j=V(l,b,N),[M,m]=Ye(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(n=e.defaultOpen)!==null&&n!==void 0?n:e.defaultVisible}),x=(O,w)=>{m(O,!0),h==null||h(O,w)},f=O=>{O.keyCode===pt.ESC&&x(!1,O)},A=O=>{x(O)};return S(a.createElement(Ze,Object.assign({placement:c,trigger:g,mouseEnterDelay:v,mouseLeaveDelay:u,overlayStyle:p},$,{prefixCls:d,overlayClassName:j,ref:t,open:M,onOpenChange:A,overlay:i||s?a.createElement(wt,{prefixCls:d,title:i,content:s}):null,transitionName:et(E,"zoom-big",$.transitionName),"data-popover-inject":!0}),ve(y,{onKeyDown:O=>{var w,W;a.isValidElement(y)&&((W=y==null?void 0:(w=y.props).onKeyDown)===null||W===void 0||W.call(w,O)),f(O)}})))}),Ge=Pt;Ge._InternalPanelDoNotUseOrYouWillBeFired=Ot;const Pe=e=>{const{size:t,shape:r}=a.useContext(ye),n=a.useMemo(()=>({size:e.size||t,shape:e.shape||r}),[e.size,e.shape,t,r]);return a.createElement(ye.Provider,{value:n},e.children)},Et=e=>{const{getPrefixCls:t,direction:r}=a.useContext(K),{prefixCls:n,className:o,rootClassName:i,style:s,maxCount:l,maxStyle:c,size:g,shape:y,maxPopoverPlacement:v="top",maxPopoverTrigger:u="hover",children:h}=e,p=t("avatar",n),$=`${p}-group`,C=Re(p),[d,S,b]=Be(p,C),N=V($,{[`${$}-rtl`]:r==="rtl"},b,C,o,i,S),E=tt(h).map((M,m)=>ve(M,{key:`avatar-key-${m}`})),j=E.length;if(l&&l<j){const M=E.slice(0,l),m=E.slice(l,j);return M.push(a.createElement(Ge,{key:"avatar-popover-key",content:m,trigger:u,placement:v,overlayClassName:`${$}-popover`,destroyTooltipOnHide:!0},a.createElement(Te,{style:c},`+${j-l}`))),d(a.createElement(Pe,{shape:y,size:g},a.createElement("div",{className:N,style:s},M)))}return d(a.createElement(Pe,{shape:y,size:g},a.createElement("div",{className:N,style:s},E)))},Le=Te;Le.Group=Et;const We=a.createContext({}),It=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},zt=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},Nt=(e,t)=>{const{prefixCls:r,componentCls:n,gridColumns:o}=e,i={};for(let s=o;s>=0;s--)s===0?(i[`${n}${t}-${s}`]={display:"none"},i[`${n}-push-${s}`]={insetInlineStart:"auto"},i[`${n}-pull-${s}`]={insetInlineEnd:"auto"},i[`${n}${t}-push-${s}`]={insetInlineStart:"auto"},i[`${n}${t}-pull-${s}`]={insetInlineEnd:"auto"},i[`${n}${t}-offset-${s}`]={marginInlineStart:0},i[`${n}${t}-order-${s}`]={order:0}):(i[`${n}${t}-${s}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${s/o*100}%`,maxWidth:`${s/o*100}%`}],i[`${n}${t}-push-${s}`]={insetInlineStart:`${s/o*100}%`},i[`${n}${t}-pull-${s}`]={insetInlineEnd:`${s/o*100}%`},i[`${n}${t}-offset-${s}`]={marginInlineStart:`${s/o*100}%`},i[`${n}${t}-order-${s}`]={order:s});return i[`${n}${t}-flex`]={flex:`var(--${r}${t}-flex)`},i},$e=(e,t)=>Nt(e,t),Rt=(e,t,r)=>({[`@media (min-width: ${T(t)})`]:Object.assign({},$e(e,r))}),Bt=()=>({}),Tt=()=>({}),Mt=re("Grid",It,Bt),Gt=re("Grid",e=>{const t=ce(e,{gridColumns:24}),r={"-sm":t.screenSMMin,"-md":t.screenMDMin,"-lg":t.screenLGMin,"-xl":t.screenXLMin,"-xxl":t.screenXXLMin};return[zt(t),$e(t,""),$e(t,"-xs"),Object.keys(r).map(n=>Rt(t,r[n],n)).reduce((n,o)=>Object.assign(Object.assign({},n),o),{})]},Tt);var Lt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};function Ee(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const Wt=["xs","sm","md","lg","xl","xxl"],kt=a.forwardRef((e,t)=>{const{getPrefixCls:r,direction:n}=a.useContext(K),{gutter:o,wrap:i}=a.useContext(We),{prefixCls:s,span:l,order:c,offset:g,push:y,pull:v,className:u,children:h,flex:p,style:$}=e,C=Lt(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),d=r("col",s),[S,b,N]=Gt(d),E={};let j={};Wt.forEach(x=>{let f={};const A=e[x];typeof A=="number"?f.span=A:typeof A=="object"&&(f=A||{}),delete C[x],j=Object.assign(Object.assign({},j),{[`${d}-${x}-${f.span}`]:f.span!==void 0,[`${d}-${x}-order-${f.order}`]:f.order||f.order===0,[`${d}-${x}-offset-${f.offset}`]:f.offset||f.offset===0,[`${d}-${x}-push-${f.push}`]:f.push||f.push===0,[`${d}-${x}-pull-${f.pull}`]:f.pull||f.pull===0,[`${d}-rtl`]:n==="rtl"}),f.flex&&(j[`${d}-${x}-flex`]=!0,E[`--${d}-${x}-flex`]=Ee(f.flex))});const M=V(d,{[`${d}-${l}`]:l!==void 0,[`${d}-order-${c}`]:c,[`${d}-offset-${g}`]:g,[`${d}-push-${y}`]:y,[`${d}-pull-${v}`]:v},u,j,b,N),m={};if(o&&o[0]>0){const x=o[0]/2;m.paddingLeft=x,m.paddingRight=x}return p&&(m.flex=Ee(p),i===!1&&!m.minWidth&&(m.minWidth=0)),S(a.createElement("div",Object.assign({},C,{style:Object.assign(Object.assign(Object.assign({},m),$),E),className:M,ref:t}),h))});var At=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};function Ie(e,t){const[r,n]=a.useState(typeof e=="string"?e:""),o=()=>{if(typeof e=="string"&&n(e),typeof e=="object")for(let i=0;i<Z.length;i++){const s=Z[i];if(!t[s])continue;const l=e[s];if(l!==void 0){n(l);return}}};return a.useEffect(()=>{o()},[JSON.stringify(e),t]),r}const _t=a.forwardRef((e,t)=>{const{prefixCls:r,justify:n,align:o,className:i,style:s,children:l,gutter:c=0,wrap:g}=e,y=At(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:v,direction:u}=a.useContext(K),[h,p]=a.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[$,C]=a.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),d=Ie(o,$),S=Ie(n,$),b=a.useRef(c),N=st();a.useEffect(()=>{const G=N.subscribe(q=>{C(q);const H=b.current||0;(!Array.isArray(H)&&typeof H=="object"||Array.isArray(H)&&(typeof H[0]=="object"||typeof H[1]=="object"))&&p(q)});return()=>N.unsubscribe(G)},[]);const E=()=>{const G=[void 0,void 0];return(Array.isArray(c)?c:[c,void 0]).forEach((H,ee)=>{if(typeof H=="object")for(let I=0;I<Z.length;I++){const U=Z[I];if(h[U]&&H[U]!==void 0){G[ee]=H[U];break}}else G[ee]=H}),G},j=v("row",r),[M,m,x]=Mt(j),f=E(),A=V(j,{[`${j}-no-wrap`]:g===!1,[`${j}-${S}`]:S,[`${j}-${d}`]:d,[`${j}-rtl`]:u==="rtl"},i,m,x),O={},w=f[0]!=null&&f[0]>0?f[0]/-2:void 0;w&&(O.marginLeft=w,O.marginRight=w);const[W,F]=f;O.rowGap=F;const _=a.useMemo(()=>({gutter:[W,F],wrap:g}),[W,F,g]);return M(a.createElement(We.Provider,{value:_},a.createElement("div",Object.assign({},y,{className:A,style:Object.assign(Object.assign({},O),s),ref:t}),l)))}),xe=D.createContext({});xe.Consumer;var ke=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const Ht=e=>{var{prefixCls:t,className:r,avatar:n,title:o,description:i}=e,s=ke(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=a.useContext(K),c=l("list",t),g=V(`${c}-item-meta`,r),y=D.createElement("div",{className:`${c}-item-meta-content`},o&&D.createElement("h4",{className:`${c}-item-meta-title`},o),i&&D.createElement("div",{className:`${c}-item-meta-description`},i));return D.createElement("div",Object.assign({},s,{className:g}),n&&D.createElement("div",{className:`${c}-item-meta-avatar`},n),(o||i)&&y)},Dt=D.forwardRef((e,t)=>{const{prefixCls:r,children:n,actions:o,extra:i,className:s,colStyle:l}=e,c=ke(e,["prefixCls","children","actions","extra","className","colStyle"]),{grid:g,itemLayout:y}=a.useContext(xe),{getPrefixCls:v}=a.useContext(K),u=()=>{let S;return a.Children.forEach(n,b=>{typeof b=="string"&&(S=!0)}),S&&a.Children.count(n)>1},h=()=>y==="vertical"?!!i:!u(),p=v("list",r),$=o&&o.length>0&&D.createElement("ul",{className:`${p}-item-action`,key:"actions"},o.map((S,b)=>D.createElement("li",{key:`${p}-item-action-${b}`},S,b!==o.length-1&&D.createElement("em",{className:`${p}-item-action-split`})))),C=g?"div":"li",d=D.createElement(C,Object.assign({},c,g?{}:{ref:t},{className:V(`${p}-item`,{[`${p}-item-no-flex`]:!h()},s)}),y==="vertical"&&i?[D.createElement("div",{className:`${p}-item-main`,key:"content"},n,$),D.createElement("div",{className:`${p}-item-extra`,key:"extra"},i)]:[n,$,ve(i,{key:"extra"})]);return g?D.createElement(kt,{ref:t,flex:1,style:l},d):d}),Ae=Dt;Ae.Meta=Ht;const Vt=e=>{const{listBorderedCls:t,componentCls:r,paddingLG:n,margin:o,itemPaddingSM:i,itemPaddingLG:s,marginLG:l,borderRadiusLG:c}=e;return{[`${t}`]:{border:`${T(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:c,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:n},[`${r}-pagination`]:{margin:`${T(o)} ${T(l)}`}},[`${t}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:i}},[`${t}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:s}}}},Ft=e=>{const{componentCls:t,screenSM:r,screenMD:n,marginLG:o,marginSM:i,margin:s}=e;return{[`@media screen and (max-width:${n}px)`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${r}px)`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${T(s)}`}}}}}},Xt=e=>{const{componentCls:t,antCls:r,controlHeight:n,minHeight:o,paddingSM:i,marginLG:s,padding:l,itemPadding:c,colorPrimary:g,itemPaddingSM:y,itemPaddingLG:v,paddingXS:u,margin:h,colorText:p,colorTextDescription:$,motionDurationSlow:C,lineWidth:d,headerBg:S,footerBg:b,emptyTextPadding:N,metaMarginBottom:E,avatarMarginRight:j,titleMarginBottom:M,descriptionFontSize:m}=e,x={};return["start","center","end"].forEach(f=>{x[`&-align-${f}`]={textAlign:f}}),{[`${t}`]:Object.assign(Object.assign({},he(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:S},[`${t}-footer`]:{background:b},[`${t}-header, ${t}-footer`]:{paddingBlock:i},[`${t}-pagination`]:Object.assign(Object.assign({marginBlockStart:s},x),{[`${r}-pagination-options`]:{textAlign:"start"}}),[`${t}-spin`]:{minHeight:o,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:p,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:j},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:p},[`${t}-item-meta-title`]:{margin:`0 0 ${T(e.marginXXS)} 0`,color:p,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:p,transition:`all ${C}`,"&:hover":{color:g}}},[`${t}-item-meta-description`]:{color:$,fontSize:m,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${T(u)}`,color:$,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:d,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${T(l)} 0`,color:$,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:N,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${r}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:h,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:s},[`${t}-item-meta`]:{marginBlockEnd:E,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:M,color:p,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${T(l)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${T(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${T(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${T(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:n},[`${t}-split${t}-something-after-last-item ${r}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${T(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:v},[`${t}-sm ${t}-item`]:{padding:y},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Kt=e=>({contentWidth:220,itemPadding:`${T(e.paddingContentVertical)} 0`,itemPaddingSM:`${T(e.paddingContentVerticalSM)} ${T(e.paddingContentHorizontal)}`,itemPaddingLG:`${T(e.paddingContentVerticalLG)} ${T(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),qt=re("List",e=>{const t=ce(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[Xt(t),Vt(t),Ft(t)]},Kt);var Jt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};function se(e){var t,{pagination:r=!1,prefixCls:n,bordered:o=!1,split:i=!0,className:s,rootClassName:l,style:c,children:g,itemLayout:y,loadMore:v,grid:u,dataSource:h=[],size:p,header:$,footer:C,loading:d=!1,rowKey:S,renderItem:b,locale:N}=e,E=Jt(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const j=r&&typeof r=="object"?r:{},[M,m]=a.useState(j.defaultCurrent||1),[x,f]=a.useState(j.defaultPageSize||10),{getPrefixCls:A,renderEmpty:O,direction:w,list:W}=a.useContext(K),F={current:1,total:0},_=R=>(k,X)=>{var ue;m(k),f(X),r&&r[R]&&((ue=r==null?void 0:r[R])===null||ue===void 0||ue.call(r,k,X))},G=_("onChange"),q=_("onShowSizeChange"),H=(R,k)=>{if(!b)return null;let X;return typeof S=="function"?X=S(R):S?X=R[S]:X=R.key,X||(X=`list-item-${k}`),a.createElement(a.Fragment,{key:X},b(R,k))},ee=()=>!!(v||r||C),I=A("list",n),[U,oe,de]=qt(I);let J=d;typeof J=="boolean"&&(J={spinning:J});const ne=J&&J.spinning,Q=ze(p);let z="";switch(Q){case"large":z="lg";break;case"small":z="sm";break}const B=V(I,{[`${I}-vertical`]:y==="vertical",[`${I}-${z}`]:z,[`${I}-split`]:i,[`${I}-bordered`]:o,[`${I}-loading`]:ne,[`${I}-grid`]:!!u,[`${I}-something-after-last-item`]:ee(),[`${I}-rtl`]:w==="rtl"},W==null?void 0:W.className,s,l,oe,de),P=lt(F,{total:h.length,current:M,pageSize:x},r||{}),Se=Math.ceil(P.total/P.pageSize);P.current>Se&&(P.current=Se);const be=r?a.createElement("div",{className:V(`${I}-pagination`,`${I}-pagination-align-${(t=P==null?void 0:P.align)!==null&&t!==void 0?t:"end"}`)},a.createElement(ct,Object.assign({},P,{onChange:G,onShowSizeChange:q}))):null;let me=Oe(h);r&&h.length>(P.current-1)*P.pageSize&&(me=Oe(h).splice((P.current-1)*P.pageSize,P.pageSize));const _e=Object.keys(u||{}).some(R=>["xs","sm","md","lg","xl","xxl"].includes(R)),Ce=Ne(_e),ae=a.useMemo(()=>{for(let R=0;R<Z.length;R+=1){const k=Z[R];if(Ce[k])return k}},[Ce]),He=a.useMemo(()=>{if(!u)return;const R=ae&&u[ae]?u[ae]:u.column;if(R)return{width:`${100/R}%`,maxWidth:`${100/R}%`}},[JSON.stringify(u),ae]);let pe=ne&&a.createElement("div",{style:{minHeight:53}});if(me.length>0){const R=me.map((k,X)=>H(k,X));pe=u?a.createElement(_t,{gutter:u.gutter},a.Children.map(R,k=>a.createElement("div",{key:k==null?void 0:k.key,style:He},k))):a.createElement("ul",{className:`${I}-items`},R)}else!g&&!ne&&(pe=a.createElement("div",{className:`${I}-empty-text`},N&&N.emptyText||(O==null?void 0:O("List"))||a.createElement(dt,{componentName:"List"})));const ie=P.position||"bottom",De=a.useMemo(()=>({grid:u,itemLayout:y}),[JSON.stringify(u),y]);return U(a.createElement(xe.Provider,{value:De},a.createElement("div",Object.assign({style:Object.assign(Object.assign({},W==null?void 0:W.style),c),className:B},E),(ie==="top"||ie==="both")&&be,$&&a.createElement("div",{className:`${I}-header`},$),a.createElement(mt,Object.assign({},J),pe,g),C&&a.createElement("div",{className:`${I}-footer`},C),v||(ie==="bottom"||ie==="both")&&be)))}se.Item=Ae;const an=()=>{const{consumer:e}=ge(m=>m.consumer),{currentOrder:t}=ge(m=>m.deviceHandler),{choice:r,company:n}=ge(m=>m.event),[o,i]=a.useState(void 0),s=a.useRef(null),l=a.useRef(!1),c=a.useRef(!0),g=a.useRef(!0),y=a.useRef(0),v=a.useRef({paymentIntentGenerated:"pi_"+je(12),clientSecretGenerated:`_client_secret=${je(12)}`}),u=nt(),h=rt(),p=new URLSearchParams(window.location.search).get("payment_intent"),$=new URLSearchParams(window.location.search).get("payment_intent_client_secret"),C=()=>({...e,uid:C().uid}),d=()=>(t==null?void 0:t.map(x=>parseInt(x.deviceNeeded))).reduce((x,f)=>x+f,0);a.useEffect(()=>{const m=new AbortController;return d(),()=>{m.abort()}},[]);const S=a.useCallback(async()=>{const m={paymentIntent:p,clientSecret:$,device:d(),user:C().uid,provider:n,eventSelected:r};await Y.post("/stripe/stripe-transaction",m)},[]),b=a.useCallback(async()=>{const m={paymentIntent:v.current.paymentIntentGenerated,clientSecret:v.current.clientSecretGenerated,device:d(),user:C().uid,provider:n,eventSelected:r};await Y.post("/stripe/stripe-transaction-no-regular-user",m)},[]),N=a.useCallback(async()=>{if(g.current){const m={paymentIntent:v.current.paymentIntentGenerated,clientSecret:v.current.clientSecretGenerated,device:t[0],consumerInfo:e,provider:n,eventSelected:r,date:new Date};return await Y.post("/stripe/save-transaction",m),g.current=!1}},[]),E=a.useCallback(async()=>{if(l.current===!1)return i(v.current.paymentIntentGenerated),s.current=v.current.paymentIntentGenerated,y.current===0&&(b(),N(),y.current=1),l.current=!0},[]);a.useEffect(()=>{const m=new AbortController;return p&&$?c.current&&(v.current={paymentIntentGenerated:p,clientSecretGenerated:$},S(),N(v),i(p),c.current=!1):E(),()=>{m.abort()}},[]),(async()=>{const m=await Y.get("/admin/users"),x=await Y.get("/stripe/transaction"),f=we.groupBy(m.data.stripeTransactions,"eventSelected"),A=Object.values(f[r]),O=we.groupBy(x.data.list,"eventSelected"),w={};for(let _ of A)w[_.paymentIntent]?await Y.delete(`/stripe/remove-duplicate/${_.id}`):w[_.paymentIntent]=1;const W=Object.values(O[r]),F={};for(let _ of W)F[_.paymentIntent]?await Y.delete(`/stripe/removing/${_.id}`):F[_.paymentIntent]=1})();const M=()=>(setTimeout(()=>(h(ot(void 0)),u("/device",{replace:!0})),2e3),null);return L.jsxs(te,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",container:!0,children:[L.jsx(te,{marginY:5,item:!0,xs:12,children:L.jsxs(fe,{textTransform:"none",color:"var(--gray-900, #101828)",textAlign:"center",fontFamily:"Inter",fontSize:"18px",fontStyle:"normal",fontWeight:400,lineHeight:"24px",style:{textWrap:"balance"},children:["We are taking you to the current order page for more information.",M()]})}),L.jsx(te,{item:!0,xs:12,children:L.jsx(at,{bgColor:"#fff",errorLevel:"H",value:o?o.paymentIntent:"https://devitrak.com",icon:"https://i.ibb.co/kKktFyw/maskable-icon.png"})}),L.jsx(te,{margin:"1rem auto",item:!0,xs:12,children:L.jsx(fe,{textTransform:"none",color:"var(--gray-900, #101828)",textAlign:"left",fontFamily:"Inter",fontSize:"24px",fontStyle:"normal",fontWeight:600,lineHeight:"32px",children:"Order completed"})}),L.jsxs(te,{marginX:"auto",item:!0,xs:12,children:[" ",L.jsxs(fe,{textTransform:"none",color:"var(--gray-900, #101828)",textAlign:"center",fontFamily:"Inter",fontSize:"14px",fontStyle:"normal",fontWeight:400,lineHeight:"20px",padding:"auto",style:{textWrap:"balance",width:"80%",margin:"0 auto"},children:["Please proceed to go to the pick up location to collect your"," ",d()>1?"devices":"device",". Show this qr code to staff to find your order."]})]}),L.jsx(it,{}),L.jsx(se,{style:{width:"90%"},itemLayout:"horizontal",dataSource:t,renderItem:m=>L.jsx(se.Item,{actions:[L.jsx("p",{children:m.deviceNeeded},"list-loadmore-more")],children:L.jsx(se.Item.Meta,{avatar:L.jsx(Le,{src:"../../assets/devitrak_logo.svg"}),title:L.jsx("div",{children:L.jsxs("p",{children:[d()>1?"Devices":"Device"," required"]})})})})}),L.jsx(te,{item:!0,xs:12})]})};export{an as default};
